server:\n  port: 8080\n\nspring:\n  cloud:\n    sentinel:\n      transport:\n        dashboard: localhost:8858 # Sentinel 控制台地址\n        port: 8719 # 客户端监控端口\n      # 开启网关的贪婪模式 (可选，能匹配更多 URL)\n      web-context-unify: false\n      datasource:\n        # 流控规则\n        flow:\n          nacos:\n            server-addr: localhost:8848\n            dataId: ${spring.application.name}-flow-rules\n            groupId: SENTINEL_GROUP\n            data-type: json\n            rule-type: flow\n        # 熔断降级规则\n        degrade:\n          nacos:\n            server-addr: localhost:8848\n            dataId: ${spring.application.name}-degrade-rules\n            groupId: SENTINEL_GROUP\n            data-type: json\n            rule-type: degrade\n        # 系统规则\n        system:\n          nacos:\n            server-addr: localhost:8848\n            dataId: ${spring.application.name}-system-rules\n            groupId: SENTINEL_GROUP\n            data-type: json\n            rule-type: system\n        # 授权规则\n        authority:\n          nacos:\n            server-addr: localhost:8848\n            dataId: ${spring.application.name}-authority-rules\n            groupId: SENTINEL_GROUP\n            data-type: json\n            rule-type: authority\n        # 热点参数规则\n        param-flow:\n          nacos:\n            server-addr: localhost:8848\n            dataId: ${spring.application.name}-param-flow-rules\n            groupId: SENTINEL_GROUP\n            data-type: json\n            rule-type: param-flow\n    gateway:\n      discovery:\n        locator:\n          enabled: true\n          lower-case-service-id: true\n      # 路由规则全部放这里\n      routes:\n        - id: auth_route\n          uri: lb://hksc-auth\n          predicates:\n            - Path=/api/auth/**\n          filters:\n            - StripPrefix=1\n        - id: user_route\n          uri: lb://hksc-user\n          predicates:\n            - Path=/api/user/**\n          filters:\n            - StripPrefix=1\n        - id: product_route\n          uri: lb://hksc-product\n          predicates:\n            - Path=/api/product/**\n          filters:\n            - StripPrefix=1\n        - id: order_route\n          uri: lb://hksc-order\n          predicates:\n            - Path=/api/order/**\n          filters:\n            - StripPrefix=1\n        - id: cart_route\n          uri: lb://hksc-cart\n          predicates:\n            - Path=/api/cart/**\n          filters:\n            - StripPrefix=1\n        - id: search_route\n          uri: lb://hksc-search\n          predicates:\n            - Path=/api/search/**\n          filters:\n            - StripPrefix=1\n        - id: ai-route\n          uri: lb://hksc-ai\n          predicates:\n            - Path=/api/ai/**\n          filters:\n            - StripPrefix=1\n      globalcors:\n        cors-configurations:\n          '[/**]':\n            allowedOrigins: "*"  # 允许所有来源 (生产环境建议指定域名)\n            allowedMethods: "*"  # 允许 GET, POST, PUT, DELETE\n            allowedHeaders: "*"  # 允许所有 Header (Token, Order-Token)\n            allowCredentials: false # 如果 allowedOrigins 是 *，这里必须是 false
